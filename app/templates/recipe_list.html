{% extends "base.html" %} {% block navbar%} {% include 'navbar.html'%} {%
endblock%} {% block content %}

<head>
  <style>
    body {
      margin-top: 5vh;
    }

    .download-button {
      display: inline-block;
      padding: 10px;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s, transform 0.3s, box-shadow 0.3s;
    }

    .download-button:hover {
      transform: scale(1.05);
    }

    .download-button img {
      width: 80px; /* Adjust the width as needed */
      height: 80px; /* Adjust the height as needed */
      display: block;
      margin: 0 auto;
    }

    .download-button {
      text-align: center;
      margin-top: 10px;
      margin-bottom: 10px;
      font-size: 20px;
      font-weight: bold;
      color: var(--primary-color);
      text-decoration: none !important;
    }

    #clear-list-container {
      text-align: right;
      margin-top: 10px;
      margin-bottom: 10px;
    }

    .button-bar {
      display: flex;
      justify-content: space-between;
      padding-top: 20px;
      justify-content: flex-end; /* Align buttons to the right side */
      align-items: center; /* Align buttons vertically centered */
    }

    #clearRecipesBtn {
      background-color: var(--bad-button-color);
      color: var(--primary-color);
      text-decoration: none;
      padding: 10px 20px;
      border: 1px solid (var(--primary-color));
      border-radius: 5px;
    }

    .button-bar {
      display: flex;
      gap: 10px; /* Adjust the gap between buttons */
    }

    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 10000000;
    }

    .modal-content {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 50%;
      transform: translate(-50%, -50%);
      background-color: white;
      padding: 20px;
      text-align: center;
    }

    .close {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 20px;
      cursor: pointer;
    }

    input[type="checkbox"] {
      width: 30px;
      height: 30px;
    }

    label {
      font-weight: bold;
      font-size: 18px;
      margin-right: 20px;
      padding-top: 5px;
    }

    .form-group {
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
  </style>
</head>
<body>
  <div id="confirmModal" class="modal">
    <div class="modal-content">
      <span class="close" id="closeModal">&times;</span>
      <h2>Did you cook any of these?</h2>
      <form class="confirm-form" method="POST" action="{{url_for('confirm')}}">
        {% for recipe in recipes %}
        <div>
          <!-- Create a checkbox for each recipe -->
          <input
            type="checkbox"
            id="{{ loop.index }}"
            name="recipeCheckbox"
            value="{{ recipe.title }}"
          />
          <!-- Display the title of the recipe next to the checkbox -->
          <label for="{{ loop.index }}">{{ recipe.title }}</label>
        </div>
        {% endfor %}

        <!-- Add a submit button to submit the form -->
        <input type="submit" value="Confirm" />
      </form>
    </div>
  </div>
  <div class="main-container">
    <div class="button-bar">
      <button class="bad-btn" id="clearRecipesBtn">Clear Recipes</button>
    </div>

    <div class="container-fluid mt-4">
      <div class="row" id="recipe-container">
        {% if not recipes %}
        <div class="col-md-12">
          <h2>Nothing here yet, get to browsing!</h2>
        </div>
        {% endif %} {% include 'recipe_partial.html'%}
      </div>
    </div>
  </div>
</body>

{% include 'recipe_functions.html' %}

<script>
  function toggleRecipeInList(recipeId) {
    // Send the recipe ID to the server to toggle its state
    $.ajax({
      url: "/toggle-recipe-in-list/" + recipeId,
      type: "GET",
      success: function (data) {
        $("#" + recipeId).hide(); // Hide the element with ID recipe.id
        var recipeCount = getRecipeListCount();
        updateRecipeCounters(recipeCount);
      },
      error: function () {
        console.error("Failed to toggle recipe in list");
      },
    });
  }

  document
    .getElementById("clearRecipesBtn")
    .addEventListener("click", function () {
      // Show the modal when the button is clicked
      document.getElementById("confirmModal").style.display = "block";
    });

  document.getElementById("closeModal").addEventListener("click", function () {
    document.getElementById("confirmModal").style.display = "none";
  });

  function clearSelectedRecipes() {
    // Add logic to clear selected recipes based on checkbox state

    // For now, just hide the modal
    document.getElementById("confirmModal").style.display = "none";
  }
</script>
{% endblock %}
